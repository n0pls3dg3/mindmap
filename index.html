<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sơ Đồ Tổ Chức - Nền Việt Nam</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Patrick Hand', cursive;
            background-image: url('hinh-nen-viet-nam-4k49.jpg'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 50px 0;
            color: #3D405B;
            overflow-x: hidden;
            position: relative;
        }

        /* --- Text Overlay for Name (Đã điều chỉnh xuống dưới) --- */
        .name-overlay {
            position: fixed; /* Cố định vị trí trên màn hình */
            bottom: 50px;    /* Khoảng cách từ DƯỚI LÊN */
            left: 50px;      /* Khoảng cách từ trái */
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 20;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 8px;
            letter-spacing: 1px;
        }

        .container-fluid {
            position: relative;
            max-width: 1800px;
            margin: auto;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.55);
            border-radius: 15px;
            padding: 40px 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* --- Chart Box Styling (Sticky Note) --- */
        .chart-box {
            background-color: #fff;
            padding: 12px 18px;
            border: 1.5px solid #3D405B;
            border-radius: 5px;
            box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.1);
            margin: 10px;
            display: inline-block;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            font-size: 1rem;
            min-width: 140px;
            text-decoration: none;
            color: inherit;
        }
        
        .chart-box:hover {
            transform: scale(1.05) rotate(0deg) !important;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.15);
            z-index: 10;
        }

        /* Random rotation */
        .rot-0 { transform: rotate(0deg); }
        .rot-1 { transform: rotate(-1.5deg); }
        .rot-2 { transform: rotate(1deg); }
        .rot-3 { transform: rotate(2.5deg); }
        .rot-4 { transform: rotate(-1.8deg); }
        .rot-5 { transform: rotate(0.8deg); }

        /* Color Palette - Pastel Doodle */
        #box-bqp { 
            background-color: #A9D6E5;
            font-weight: bold;
            font-size: 1.5rem;
        }
        .level-2 .chart-box { 
            background-color: #F2CC8F;
        }
        #level-3-container .chart-box { 
            background-color: #81B29A;
        }
        .level-4 .chart-box { 
            background-color: #E07A5F;
            color: white;
        }
        .level-5 .chart-box { 
            background-color: #F4F1DE;
        }
        .level-6 .chart-box { 
            background-color: #B2DFDB;
        }
        #bottom-row-container .chart-box { 
            background-color: #FFC0CB;
        }
        #container-csb .chart-box {
             background-color: #DDA0DD;
        }

        /* Branch Container Styling */
        .branch-container {
            background-color: rgba(255, 255, 255, 0.7);
            border: 1px dashed #B5A17F;
            border-radius: 10px;
            padding: 15px 5px;
            margin: 10px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* SVG for Connectors */
        #connector-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .col-custom {
            padding: 5px;
        }
    </style>
</head>
<body>
    
<div class="name-overlay">NGUYỄN ĐẠI KHOA - 22 - 12A5</div>

    <div class="container-fluid">
        <svg id="connector-svg">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                refX="0" refY="3.5" orient="auto" fill="#5E5E5E">
                  <polygon points="0 0, 10 3.5, 0 7" />
                </marker>
            </defs>
        </svg>

        <div class="row justify-content-center mb-4">
            <div id="box-bqp" class="chart-box rot-0">BỘ QUỐC PHÒNG</div>
        </div>

        <div class="row justify-content-center mb-4 level-2">
            <div class="col-auto"><div id="box-bttm" class="chart-box rot-1">BỘ TỔNG THAM MƯU</div></div>
            <div class="col-auto"><div id="box-tcct" class="chart-box rot-2">TỔNG CỤC CHÍNH TRỊ</div></div>
        </div>
        
        <div id="level-3-container" class="row justify-content-center mb-4 level-3">
            <div class="col-auto"><div id="box-tchc" class="chart-box rot-3">Tổng cục Hậu cần</div></div>
            <div class="col-auto"><div id="box-tckt" class="chart-box rot-4">Tổng cục Kỹ thuật</div></div>
            <div class="col-auto"><div id="box-tccnqp" class="chart-box rot-5">Tổng cục CNQP</div></div>
            <div class="col-auto"><div id="box-tctb" class="chart-box rot-1">Tổng cục Tình báo QP</div></div>
        </div>

        <div id="main-units-row" class="row justify-content-center">
            <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                <div class="branch-container" id="container-qk">
                    <div id="box-qk" class="chart-box level-4 rot-2">Các Quân khu</div>
                    <div class="level-5"><div id="box-bchqs-tinh" class="chart-box rot-3">BCHQS tỉnh, T.phố</div></div>
                    <div class="level-6"><div id="box-bchqs-huyen" class="chart-box rot-4">BCHQS huyện, quận</div></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                 <div class="branch-container" id="container-qd">
                    <div id="box-qd" class="chart-box level-4 rot-5">Các Quân đoàn</div>
                    <div class="level-5"><div id="box-qd-sd" class="chart-box rot-1">Sư đoàn</div></div>
                    <div class="level-5"><div id="box-qd-ld" class="chart-box rot-2">Lữ đoàn</div></div>
                    <div class="level-5"><div id="box-qd-trungd" class="chart-box rot-3">Trung đoàn</div></div>
                 </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                <div class="branch-container" id="container-bc">
                    <div id="box-bc" class="chart-box level-4 rot-4">Các Binh chủng</div>
                    <div class="level-5"><div id="box-bc-sd" class="chart-box rot-5">Sư đoàn</div></div>
                    <div class="level-5"><div id="box-bc-trungd" class="chart-box rot-1">Trung đoàn</div></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                <div class="branch-container" id="container-pkkq">
                    <div id="box-pkkq" class="chart-box level-4 rot-2">Quân chủng PK-KQ</div>
                    <div class="level-5"><div id="box-pkkq-sd" class="chart-box rot-3">Sư đoàn</div></div>
                    <div class="level-5"><div id="box-pkkq-trungd" class="chart-box rot-4">Trung đoàn</div></div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                 <div class="branch-container" id="container-hq">
                    <div id="box-hq" class="chart-box level-4 rot-5">Quân chủng Hải quân</div>
                    <div class="level-5"><div id="box-hq-ld" class="chart-box rot-1">Lữ đoàn</div></div>
                    <div class="level-5"><div id="box-hq-vhq" class="chart-box rot-2">Vùng Hải quân</div></div>
                    <div class="level-6"><div id="box-hq-vhq-ld" class="chart-box rot-3">Lữ đoàn</div></div>
                 </div>
            </div>
             <div class="col-lg-2 col-md-4 col-sm-6 col-custom">
                 <div class="branch-container" id="container-bp">
                    <div id="box-bp" class="chart-box level-4 rot-4">Bộ đội Biên phòng</div>
                    <div class="level-5"><div id="box-bp-tinh" class="chart-box rot-5">Biên phòng tỉnh, T.phố</div></div>
                    <div class="level-6"><div id="box-bp-don" class="chart-box rot-1">Đồn biên phòng</div></div>
                 </div>
            </div>
        </div>

        <div id="bottom-row-container" class="row justify-content-center mt-4 bottom-row">
            <div class="col-auto"><div id="box-hv" class="chart-box rot-2">Học viện, nhà trường</div></div>
            <div class="col-auto"><div id="box-vnc" class="chart-box rot-3">Viện nghiên cứu</div></div>
            <div class="col-auto"><div id="box-dvkt" class="chart-box rot-4">Đơn vị kinh tế</div></div>
            <div class="col-auto"><div id="box-cccn" class="chart-box rot-5">Cục chức năng</div></div>
            <div class="col-auto"><div id="box-cqttk" class="chart-box rot-1">Cơ quan trực thuộc</div></div>
            <div class="col-auto">
                <div class="branch-container" id="container-csb" style="padding:10px; margin: 0;">
                    <div id="box-csb" class="chart-box rot-2">Cảnh sát biển</div>
                    <div id="box-vcsb" class="chart-box rot-3">Vùng Cảnh sát biển</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const svg = document.getElementById('connector-svg');
            const container = document.querySelector('.container-fluid');

            const connections = [
                ['box-bqp', 'box-bttm'], ['box-bqp', 'box-tcct'],
                ['box-bttm', 'box-tchc'], ['box-bttm', 'box-tckt'], ['box-bttm', 'box-tccnqp'], ['box-bttm', 'box-tctb'],
                ['box-bttm', 'container-qk'], ['box-bttm', 'container-qd'], ['box-bttm', 'container-bc'], ['box-bttm', 'container-pkkq'], ['box-bttm', 'container-hq'], ['box-bttm', 'container-bp'],
                ['box-qk', 'box-bchqs-tinh'], ['box-bchqs-tinh', 'box-bchqs-huyen'],
                ['box-qd', 'box-qd-sd'], ['box-qd-sd', 'box-qd-ld'], ['box-qd-ld', 'box-qd-trungd'],
                ['box-bc', 'box-bc-sd'], ['box-bc-sd', 'box-bc-trungd'],
                ['box-pkkq', 'box-pkkq-sd'], ['box-pkkq-sd', 'box-pkkq-trungd'],
                ['box-hq', 'box-hq-ld'], ['box-hq', 'box-hq-vhq'], ['box-hq-vhq', 'box-hq-vhq-ld'],
                ['box-bp', 'box-bp-tinh'], ['box-bp-tinh', 'box-bp-don'],
                ['box-bttm', 'box-hv'], ['box-bttm', 'box-vnc'], ['box-bttm', 'box-dvkt'], ['box-bttm', 'box-cccn'], ['box-bttm', 'box-cqttk'], ['box-bttm', 'container-csb'],
                ['box-csb', 'box-vcsb'],
            ];

            function drawConnectors() {
                svg.innerHTML = svg.querySelector('defs').outerHTML;
                const containerRect = container.getBoundingClientRect();
                if (containerRect.width === 0) return;

                connections.forEach(pair => {
                    const fromEl = document.getElementById(pair[0]);
                    const toEl = document.getElementById(pair[1]);
                    if (!fromEl || !toEl) return;
                    const fromRect = fromEl.getBoundingClientRect();
                    const toRect = toEl.getBoundingClientRect();
                    const x1 = fromRect.left + fromRect.width / 2 - containerRect.left;
                    const y1 = fromRect.bottom - containerRect.top;
                    const x2 = toRect.left + toRect.width / 2 - containerRect.left;
                    const y2 = toRect.top - containerRect.top;
                    const midY = y1 + 20;
                    createPath(`M ${x1} ${y1} L ${x1} ${midY} L ${x2} ${midY} L ${x2} ${y2}`);
                });
            }
            
            function createPath(d) {
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', d);
                path.setAttribute('stroke', '#5E5E5E');
                path.setAttribute('stroke-width', '1.5');
                path.setAttribute('fill', 'none');
                path.setAttribute('marker-end', 'url(#arrowhead)');
                svg.appendChild(path);
            }

            const ro = new ResizeObserver(drawConnectors);
            ro.observe(container);
            setTimeout(drawConnectors, 100);
        });
    </script>
</body>
</html>
